# 根据数据结构进行分类

## B+ 树索引

B+ 树将数据存放在叶子结点，然后将叶子节点通过指针双向链接

B+ 树索引的特点

1. 适用于范围查询和精确查询，以及有序数据的快速查找，排序和聚合
2. 是 MySQL 的默认索引类型，常用于 InnoDB 和 MyISAM 引擎

B+ 树相比于 B 树的优化

* B 树在查询时不够稳定，如果在根节点附近的数据查询就很快，而在叶子节点的就相对较慢。B+ 树优化了稳定性，数据查询一定会到达叶子结点。
* B 树在进行范围查询的时候，数据散落在不同的节点上，会经常出现回溯的操作。而B+ 树的叶子结点之间通过指针链接，范围查询就相当方便。
* 因为非叶子节点相比于B 树不在存储数据，这样就可以存储大量的索引，减少树的高度，降低磁盘访问次数，优化io，并且还可以将索引常驻内存，加速查询。

## 哈希索引

哈希索引的特点

1. 适用于等值查询，而不适用于范围查询，因为哈希索引是计算了索引键的哈希值，并映射到哈希表的指定位置，当需要查询数据的时候，用同样的哈希函数去计算键的哈希值，就可以直接访问到对应位置。而哈希值是无序的，没办法去进行范围查询。
2. 常用于 MySQL 的 Memory 引擎

## 倒排索引

倒排索引的特点

1. 适用于全文搜索，关键词搜索，模糊匹配，因为他的原理是通过将全文进行分词，然后生成词语和全文的映射，也就是知道某一个词语在全文的位置。
2. 优点在于省时，时间复杂度应该是 O(1)，并且能够直观的得到关键词在全文中出现的频率
3. 缺点就是费空间，毕竟需要保存词语，id，全文位置等信息，而且对于实时写入场景不太友好，毕竟写入之后就需要更新一次索引。

## R 树索引

没看懂

# 根据物理结构进行分类

## 聚簇索引

聚簇索引的特点

1. 叶子节点存放的就是数据本身，所以只要找到了索引就相当于找到了数据
2. 在物理上按照索引的键值顺序存储
3. 一个表只能有一个聚簇索引

## 非聚簇索引

非聚簇索引的特点

1. 叶子节点存放的是索引键值以及聚簇索引的键值，这里我的理解是，比如一个个人信息表，表里有很多类别的数据，我们单独把 name 拿出来建立一个非聚簇索引，叶节点存的是 name 值和聚簇索引中对应 name 的主键值，通过 name 找到主键值后就可以去聚簇索引找到详细信息。
2. 一个表可以有多个非聚簇索引

# 根据索引性质进行分类

## 普通索引

普通索引就是最基本的索引类型，没有任何特殊约束

特点

* 允许重复值和 null
* 一个表可以创建多个普通索引
* 不保证数据唯一性

## 主键索引

主键索引是特殊的唯一索引，不允许 null，每一个表只允许一个主键

特点

* 在 InnoDB 中会自动成为聚簇索引
* 在其他表可以通过外键引用
* 保证唯一和非空

## 联合索引

联合索引是对多列的组合索引，多个列的顺序很重要，因为遵循最左原则（我理解的是比如有三个列，col1，col2，col3，索引的时候不能跳过 col2 直接使用 col3）

特点

* 对多列进行索引的时候要比多个单列索引效率更高
* 可以实现索引覆盖（简单来说就是不需要回表就可以获取到数据）

## 唯一索引

唯一索引适用于需要保证唯一，但是不作为主键的列，比如用户名，手机号，邮箱。

特点

* 主键不允许 null，但是唯一索引允许
* 每一个表只允许一个主键，但是可以有多个唯一索引

## 全文索引

全文索引适用于文本内容，也就是进行自然语言搜索，比 like 高效很多。

特点

* 只适用于 char，varchar，text 类型
* 支持关键词搜索和相关性排序，和这个索引的数据结构有关

## 空间索引

空间索引是地理空间数据类型专用的索引，支持空间数据的高效查询。

## 综合对比表

| 索引类型 | 唯一性 | NULL值 | 数量限制 | 主要用途     | 数据结构   |
| :------- | :----- | :----- | :------- | :----------- | :--------- |
| 普通索引 | 否     | 允许   | 多个     | 加速查询     | B+树       |
| 主键索引 | 是     | 不允许 | 1个/表   | 行唯一标识   | B+树(聚簇) |
| 联合索引 | 可选   | 允许   | 多个     | 多列查询优化 | B+树       |
| 唯一索引 | 是     | 允许   | 多个     | 保证唯一性   | B+树       |
| 全文索引 | 否     | 允许   | 多个     | 文本内容搜索 | 倒排索引   |
| 空间索引 | 否     | 允许   | 多个     | 空间数据查询 | R树        |